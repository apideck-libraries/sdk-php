<?php

/**
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

declare(strict_types=1);

namespace Apideck\Unify\Models\Errors;

class APIException extends \Exception
{
    public ?\Psr\Http\Message\RequestInterface $request;
    public ?\Psr\Http\Message\ResponseInterface $response;

    public function __construct(string $message = '', ?\Psr\Http\Message\RequestInterface $request = null, ?\Psr\Http\Message\ResponseInterface $response = null)
    {
        $this->message = $message;
        $this->request = $request;
        $this->response = $response;
        $code = $response->getStatusCode();
        parent::__construct($message, $code, null);
    }

    public function __toString(): string
    {
        $status = $this->response->getStatusCode();

        return "$this->message: Status $status";
    }

}